<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>the Blogtimize/r/</title>

    <!-- Bootstrap core CSS -->
    <link href="static/css/cosmo_bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">
    <link href="static/css/custom.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


  </head>

  <body>
  <div class="starter-template">
  <div class="container">
    <div class = "row">
          <div class="col-lg-12">
            <div class="bs-component">
              <div class="navbar navbar-default">
                <div class="navbar-header">
                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-inverse-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </button>
                  <a class="navbar-brand" href="reddit">the <i>Blogtimize/r/</i></a>
                </div>
                <div class="navbar-collapse collapse navbar-responsive-collapse">
                  <ul class="nav navbar-nav">
                    <li><a href="slides">Demo Slides</a></li>
                    <li><a href="plots">Data</a></li>
                  </ul>
                  </ul>
                </div>
              </div>
            </div><!-- bs component-->
          </div> <!-- col -->
   </div> <!-- row -->
  </div><!-- container -->
  <div class="container">
  <div class = "row">
    <div class = "col-md-4"></div>
    <div class = "col-md-6">      
        <p><h1>the <i>Blogtimize/r/</i></h1></p>
    </div>
    <div class = "col-md-2"></div>
  </div> <!-- /.row -->

  <div class = "row">
    <div class = "col-md-2"></div>
    <div class = "col-md-10">
	<p class="text-default">This site scores the relevance of your tech-related blog post by comparing it to posts on Reddit. </p>
	<p class="text-default">Enter your post URL in the form, or click the button next to an example article to see how it works. </p></b></h4>
    </div>
  </div>

  <div class = "row">
    <div class = "col-md-5">
      <h3>Enter Post Information</h3>
      <form action="" method="post" name="url_submit">
       <div class = "form-group">
          <label for="title_text">Post Title:</label>
          <input type="text" class="form-control" name="title_text" size=30, placeholder = "Title">
          <label for="url_txt">Post URL:</label>
          <input type="text"  class="form-control" name="url_text" size=30, placeholder="url">
      </div>
      <button type="submit" class="btn btn-default">Blogtimize!</button>
      </form>
    </div>
    <div class = "col-md-7">
      <h3>Or choose from these examples:</h3>
      <table class = "table-condensed">

      {% for samp in samples.iterrows(): %}
      <tr>
	<td><h4><a href =  {{ samp[1]['url'] }} >{{ samp[1]['title'] }}</a></h4></td>
        <td>
          <form action="" method="post" name="sample" class="form-inline">
            <div class = "input-group">
              <input type="hidden" name="url_text"  value={{ samp[1]['url'] }}>
              <input type="hidden" name="title_text"  value={{ samp[1]['title'] }}>
              <button type="submit" class="btn btn-primary btn-sm">Blogtimize!</button>
            </div> <!-- /.input group -->
          </form> 
        </td>
      </td>
      </tr>
      {% endfor %}
      </table>

      </div> 

    </div>
  </div>  <!-- /.row -->

  <HR WIDTH="60%">

  {% if url_in %}

  <div class="container">

    {% if model_out['subreddit'] == 0 %}
      <div class="container">
        <div class = "row">
        <div class = "col-md-6">
          <p><h2>This article does not appear suitable for any of the tested subreddits.<h2></p>
        </div>
        <div class = "col-md-6"></div>
     </div>
     </div>

    {% else %}


    <div class = "row">
    <div class = "col-md-5">

    	<p><h2>The best subreddit for this post is <i>{{ sub_txt }}</i> <h2></p>

	<p><h4><b>Suggested Title Keywords</b></h4></p>
	<p><h5>(High-ranking posts with similar content have used the following words in the title):</h5></p>
	<div class="bs-component">
	<h4><b><p class = "text-danger"> {{ ", ".join(model_out['keywords']) }} </p></b></h4>
	</div>

    </div>
    <div class = "col-md-5">
	<table class = "table-striped">
	<tr><td><h3><p>Predicted number of votes:  <b> {{ model_out['score'] }} </b> </p></h3></td></tr>
	<tr><td><h3><p>Predicted peak position: </p></h3></td></tr>
	<tr><td><hp><center> {{ model_out["peak"] }} </center></hp></tr></td>
	<tr><td><h3><small> With a {{ model_out["percentage"] }} % chance of reaching the front page of <i>{{ sub_txt }} </i></small></h3></tr></td>
        </table>

    </div>
  </div> <!-- /.row -->

    <div class = "row">
    <div class = "col-md-10">
	<p><h4><b>Similar Posts:</b></h4></p>
	<table class="table-condensed">
 	<thead>
    	<tr>
    	  <th>Post</th>
  	  <th>Similarity</th>
 	  <th>Votes</th>
 	</tr>
        </thead>
	<tbody>
    </div>
    </div>

	{% for post in model_out["posts"].iterrows() %}

	<tr>
	  <td><h5><a href = {{ 'http://www.reddit.com' + post[1]['permalink'] }}> {{ post[1]['title'] }} </a></h5></td>
	  <td><h5> {{ post[1]['sim_vals'] }}</h4></td>
	  <td><h5> {{ post[1]['Yups'] }}</h4></td>
	</tr></h5>
	{% endfor %}
	</tbody>
	</table>
  {% endif %}

  <HR WIDTH="60%">

   <div class = "row"
      <p><div class = "col-md-12">
    	<object type="text/html" data= {{ url_in }}   width="800px" height="600px" style="overflow:auto;border:5px ridge blue">
    	</object><
      </div></p>
    </div>

  {% endif %}

  {% if error == 1 %}
   <div class = "row"
      <p><div class = "col-md-12">
	Unable to connect to page. Please check the URL.
      </div></p>
    </div>
  {% endif %}

  </div> <!-- /.container -->


   <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
   <script src="static/js/bootstrap.min.js"></script>

    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
